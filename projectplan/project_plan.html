<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <!-- <script src="https://cdn.jsdelivr.net/npm/frappe-gantt@0.5.0/dist/frappe-gantt.min.js"></script> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
    <script src="https://kit.fontawesome.com/b38ad03545.js" crossorigin="anonymous"></script>
    <!-- <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.net/npm/frappe-gantt@0.5.0/dist/frappe-gantt.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdn.jsdelivr.net/npm/timeline-plus@0.9.3/dist/timeline-min.js"></script> -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" /> -->
    <link rel="stylesheet" href="ganttstyle.css">
    <title>iPM</title>

    <style>
        #taskDetailsTable {
            border-collapse: collapse;
            width: 100%;
        }

        #taskDetailsTable th,
        #taskDetailsTable td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        #taskDetailsTable th {
            background-color: #f2f2f2;
            color: #333;
        }

        #taskDetailsTable tbody tr:nth-child(even) {
            background-color: #b3cdda;
        }

        #taskDetailsTable tbody tr:hover {
            background-color: #9cb5c0;
        }

        /* Dont remove these styles*/
        .button {
            background-color: #52798b;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 10px;
            margin-left: 10px;
            transition: transform 0.2s, color 0.2s, background-color 0.2s;
        }

        .button:hover {
            transform: scale(1.05);
            background-color: #d0d3d4;
            color: #06597f;
        }

        .sedate {
            width: 150px;
            height: 40px;
            background-color: #c0c0c0 !important;
            position: absolute;
            top: 10%;
            left: 270px;
            z-index: 3;
            display: flex;
            flex-direction: column;
            justify-content: start;
            align-items: start;
            padding-left: 10px;
            padding-top: 10px;
            border-radius: 10px;
            text-transform: capitalize;
            color: white;

        }

        li {
            list-style: none;
        }

        .aitextbox {
            width: 50%;
            height: 300px;
            position: fixed;
            left: 25%;
            top: 20%;
            background-color: #dbdbdb;
            border-radius: 10px;
            margin: auto;
            z-index: 4;
            color: black;
            display: none;

        }

        .aitextbox h2 {
            text-align: center;
        }

        .aitextbox p {
            padding: 10px;
        }
        
    </style>


</head>

<body>
    <!-- The contents for this box will be adding dynamically -->
    <div class="aitextbox">
        <h2 class="heading"></h2>
        <p class="type-auto"></p>
        <!-- <i class="fa-solid fa-spinner"
        style="color: #9500ff; "
        ></i> -->
    </div>

    <div id="ganttChart">
        <div class="wrapper">
            <!-- <div class="header">
                <h2>Gantt Chart Concept with CSS-Grid</h2>
                <p>Use <strong>grid-column</strong> to span a new entry across the grid. (e. g. <strong>grid-column: 5/12;</strong> spans an entry from May to November)	</p>
            </div> -->
            <div class="gantt">
                <div class="gantt__row gantt__row--months" style="position: relative;">
                    <div class="month-wrapper"
                        style="color: black; width: 750px; height: 60px; text-align: center; border-radius: 10px; position: absolute; top: 100%;left: 13%; z-index: 2; display: none;">

                    </div>

                    <div class="gantt__row-first-title">Task Name</div>
                    <span class="months">Jan</span><span class="months">Feb</span><span class="months">Mar</span>
                    <span class="months">Apr</span><span class="months">May</span><span class="months">Jun</span>
                    <span class="months">Jul</span><span class="months">Aug</span><span class="months">Sep</span>
                    <span class="months">Oct</span><span class="months">Nov</span><span class="months">Dec</span>
                </div>
                <div class="gantt__row gantt__row--lines" data-month="6">
                    <span class=""></span><span class=""></span><span class=""></span>
                    <span class=""></span><span class=""></span><span></span>
                    <span class=""></span><span class="marker"></span><span class=""></span>
                    <span class=""></span><span class=""></span><span class=""></span>
                </div>
                <!-- <div class="gantt__row">
                    <div class="gantt__row-first">
                        Barnard Posselt
                    </div>
                    <ul class="gantt__row-bars">
                        <li style="grid-column: 4/11; background-color: #2ecaac;">Even longer project</li>
                    </ul>
                </div> -->
                <!-- <div class="gantt__row gantt__row--empty">
                    <div class="gantt__row-first">
                        Ryley Huggons
                    </div>
                    <ul class="gantt__row-bars"></ul>
                </div> -->
                <!-- <div class="gantt__row">
                    <div class="gantt__row-first">
                        Lanie Erwin
                    </div>
                    <ul class="gantt__row-bars">
                        <li style="grid-column: 2/5; background-color: #2ecaac;">Start Februar ðŸ™Œ</li>
                        <li style="grid-column: 1/6; background-color: #ff6252;" class="stripes"></li>
                        <li style="grid-column: 7/11; background-color: #54c6f9;">Same line</li>
                    </ul>
                </div> -->
                <!-- <div class="gantt__row gantt__row--empty">
                    <div class="gantt__row-first">
                        Krishnah Pauleit
                    </div>
                    <ul class="gantt__row-bars"></ul>
                </div> -->
                <!-- <div class="gantt__row gantt__row--empty">
                    <div class="gantt__row-first">
                        Hobard Lampitt
                    </div>
                    <ul class="gantt__row-bars"></ul>
                </div> -->
                <!-- <div class="gantt__row">
                    <div class="gantt__row-first">
                        Virgilio Jeanes
                    </div>
                    <ul class="gantt__row-bars">
                        <li style="grid-column: 2/5; background-color: #2ecaac;"></li>
                    </ul>
                </div> -->
                <!-- <div class="gantt__row">
                    <div class="gantt__row-first">
                        Ky Verick
                    </div>
                    <ul class="gantt__row-bars">
                        <li style="grid-column: 3/8; background-color: #54c6f9;">Long project</li>
                    </ul>
                </div> -->

                <!-- <div class="gantt__row">
                    <div class="gantt__row-first">
                        Ketti Waterworth
                    </div>
                    <ul class="gantt__row-bars">
                        <li style="grid-column: 4/9; background-color: #ff6252;" class="stripes">A title</li>
                    </ul>
                </div> -->
            </div>
        </div>



        <!-- Table to display task and employee details -->
        <table id="taskDetailsTable" style="margin-top: 20px; width: 100%;border-radius: 5px;" border="1">
            <thead>
                <tr>
                    <th>Task Name</th>
                    <th>Task Type</th>
                    <th>Employee Name</th>
                    <th>Work Status</th>
                    <th>Suggestion</th>
                </tr>
            </thead>
            <tbody>
                <!-- Table rows will be populated dynamically -->
            </tbody>

        </table>


        <!-- <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Dummy data coming from back end
            var tasks = JSON.parse('{{gantt_data |tojson|safe}}');



            // Initialize Gantt chart
            const gantt = new Gantt('#ganttChart', tasks, {
                header_height: 50,
                column_width: 30,
                step: 24,
                view_modes: ['Quarter Day', 'Half Day', 'Day', 'Week', 'Month'],
                bar_height: 20,
                bar_corner_radius: 3,
                arrow_curve: 5,
                padding: 18,
                view_mode: 'Day',
                date_format: 'YYYY-MM-DD',
                custom_bar_render: function (task) {
                    const bar = document.createElement('div');
                    const tasknameDiv = document.createElement('div');
                    tasknameDiv.className = 'gantt-taskname';
                    tasknameDiv.textContent = task.taskname;
                    bar.appendChild(tasknameDiv);

                    const labelDiv = document.createElement('div');
                    labelDiv.className = 'gantt-label';
                    labelDiv.textContent = task.name;
                    bar.appendChild(labelDiv);

                    bar.className = 'bar';
                    bar.style.width = task._bar_width + 'px';
                    bar.style.marginLeft = task._bar_margin + 'px';
                    bar.style.height = '20px'; // Adjust height based on your preference

                    return bar;
                },
                custom_popup_html: function (task) {
                    return '<div class="details-container">' +
                        '<div><strong>Task Name:</strong> ' + task.taskname + '</div>' +
                        '<div><strong>Name:</strong> ' + task.name + '</div>' +
                        '<div><strong>Start:</strong> ' + task._start.format('MMM D, YYYY') + '</div>' +
                        '<div><strong>End:</strong> ' + task._end.format('MMM D, YYYY') + '</div>' +
                        '</div>';
                },
                on_click: function (task) {
                    // Handle click event, if needed

                },
                on_date_change: function (task, start, end) {
                    // Handle date change event, if needed
                },
                on_progress_change: function (task, progress) {
                    // Handle progress change event, if needed
                },
            });
        });
    </script> -->
        <script>





            //main python logic
            document.addEventListener('DOMContentLoaded', function () {
                // Dummy data coming from the backend
                var tasks = JSON.parse('{{gantt_data | tojson | safe}}');

                // Calculate the total width of the Gantt chart based on task durations
                const totalWidth = tasks.reduce((acc, task) => acc + task._bar_width + task._bar_margin, 0);

                // Initialize Gantt chart
                const ganttChartContainer = document.querySelector('#ganttChart');
                ganttChartContainer.style.width = totalWidth + 'px'; // Set the width of the Gantt chart container

                const gantt = new Gantt(ganttChartContainer, tasks, {
                    // Gantt chart configuration options
                    // ...
                    header_height: 50,
                    column_width: 30,
                    step: 24,
                    view_modes: ['Quarter Day', 'Half Day', 'Day', 'Week', 'Month'],
                    bar_height: 20,
                    bar_corner_radius: 3,
                    arrow_curve: 5,
                    padding: 18,
                    view_mode: 'Day',
                    date_format: 'YYYY-MM-DD',
                    custom_bar_render: function (task) {
                        const bar = document.createElement('div');
                        const tasknameDiv = document.createElement('div');
                        tasknameDiv.className = 'gantt-taskname';
                        tasknameDiv.textContent = task.taskname;
                        bar.appendChild(tasknameDiv);

                        const labelDiv = document.createElement('div');
                        labelDiv.className = 'gantt-label';
                        labelDiv.textContent = task.name;
                        bar.appendChild(labelDiv);
                        bar.className = 'bar';
                        bar.style.width = task._bar_width + 'px';
                        bar.style.marginLeft = task._bar_margin + 'px';
                        bar.style.height = '20px';

                        // Apply different colors for Milestone and Activity tasks
                        if (task.name === 'Milestone') {
                            bar.style.background = 'green'; // Set Milestone color to green
                        } else {
                            bar.style.background = 'blue'; // Set Activity color to blue
                        }

                        return bar;
                    },
                    custom_popup_html: function (task) {
                        // Handle click event, update table with task and employee details
                        updateTable(task);

                        // Return details for Gantt chart popup
                        return '<div class="details-container">' +
                            '<div>' + task.taskname + '</div>' +

                            '</div>';
                    },
                    on_click: function (task) {
                        // Handle click event, update table with task and employee details
                        updateTable(task);
                    },
                });

                // Function to update the table with task and employee details
                function updateTable(task) {
                    var tableBody = document.getElementById('taskDetailsTable').getElementsByTagName('tbody')[0];

                    // Clear existing rows
                    tableBody.innerHTML = '';

                    // Loop through employees and add a row for each employee
                    for (var i = 0; i < task.employees_id.length; i++) {
                        var newRow = tableBody.insertRow();

                        // Insert cells with task and employee information
                        var cell1 = newRow.insertCell(0);
                        cell1.innerHTML = task.taskname;

                        var cell2 = newRow.insertCell(1);
                        cell2.innerHTML = task.name;

                        var cell3 = newRow.insertCell(2);
                        cell3.innerHTML = task.employees_name[i];

                        var cell4 = newRow.insertCell(3);
                        cell4.innerHTML = task.work_status[i];


                        if (task.work_status[i] === "going on leave") {

                            var cell5 = newRow.insertCell(4);
                            var btn = document.createElement('button');
                            btn.textContent = 'Suggest';
                            btn.className = "button"
                            btn.onclick = (function () {
                                let currentEmployeeId = task.employees_id[i];
                                return function () {

                                    console.log('Employee ID:', currentEmployeeId);
                                };
                            })();
                            cell5.appendChild(btn);
                        } else {

                            newRow.insertCell(4).innerHTML = '';
                        }

                    }
                }




            });


            //-------------testing--------------------------
            // gantt_data = [
            //     {
            //         "id": "Task 1",
            //         "taskname": "Site Survey",
            //         "name": "Activity / Task ",
            //         "employees_id": ["nan"],
            //         "employees_name": ["nan"],
            //         "work_status": ["working"],
            //         "start": "2024-01-14",
            //         "end": "2024-01-17",
            //     },
            //     {
            //         "id": "Task 2",
            //         "taskname": "Base Design",
            //         "name": "Milstone",
            //         "employees_id": ["6187.0", "6187.0", "8524.0"],
            //         "employees_name": [
            //             "AIJAZ AHMED MOHAMMED",
            //             "MOHAMMED OSAMA",
            //             "MOHAMMED NASLAH",
            //         ],
            //         "work_status": ["going on leave"],
            //         "start": "2024-04-18",
            //         "end": "2024-04-18",
            //     },
            //     {
            //         "id": "Task 2",
            //         "taskname": "Base Design 2",
            //         "name": "Activity / Task ",
            //         "employees_id": ["6187.0", "6187.0", "8524.0"],
            //         "employees_name": [
            //             "AIJAZ AHMED MOHAMMED",
            //             "MOHAMMED OSAMA",
            //             "MOHAMMED NASLAH",
            //         ],
            //         "work_status": ["working"],
            //         "start": "2024-01-18",
            //         "end": "2024-01-25",
            //     },
            //     {
            //         "id": "Task 2",
            //         "taskname": "Base Design 3",
            //         "name": "Activity / Task ",
            //         "employees_id": ["6187.0", "6187.0", "8524.0"],
            //         "employees_name": [
            //             "AIJAZ AHMED MOHAMMED",
            //             "MOHAMMED OSAMA",
            //             "MOHAMMED NASLAH",
            //         ],
            //         "work_status": ["working"],
            //         "start": "2024-01-18",
            //         "end": "2024-01-25",
            //     },
            //     {
            //         "id": "Task 2",
            //         "taskname": "Base Design 4",
            //         "name": "Activity / Task ",
            //         "employees_id": ["6187.0", "6187.0", "8524.0"],
            //         "employees_name": [
            //             "AIJAZ AHMED MOHAMMED",
            //             "MOHAMMED OSAMA",
            //             "MOHAMMED NASLAH",
            //         ],
            //         "work_status": ["leave"],
            //         "start": "2024-01-18",
            //         "end": "2024-01-25",
            //     },
            // ]

            const ganttData = [
                {
                    "id": "Task 1",
                    "taskname": "Site Survey",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "6187",
                        "6187"
                    ],
                    "employees_name": [
                        "AIJAZ AHMED MOHAMMED",
                        "AIJAZ AHMED MOHAMMED"
                    ],
                    "work_status": [
                        "working",
                        "leave"
                    ],
                    "start": "2024-01-14",
                    "end": "2024-01-17"
                },
                {
                    "id": "Task 2",
                    "taskname": "Base Design",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "6187",
                        "6187",
                        "8524"
                    ],
                    "employees_name": [
                        "AIJAZ AHMED MOHAMMED",
                        "AIJAZ AHMED MOHAMMED",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "leave",
                        "going on leave"
                    ],
                    "start": "2024-01-18",
                    "end": "2024-01-25"
                },
                {
                    "id": "Task 3",
                    "taskname": "Final (Detailed) Design",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "5501",
                        "8524"
                    ],
                    "employees_name": [
                        "DENNY CHEMPAKASSERI MATHEW",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "going on leave",
                        "going on leave"
                    ],
                    "start": "2024-06-01",
                    "end": "2024-06-08"
                },
                {
                    "id": "Task 4",
                    "taskname": "Site Permit",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8356"
                    ],
                    "employees_name": [
                        "HAMDAN AL SHAHRI"
                    ],
                    "work_status": [
                        "working"
                    ],
                    "start": "2024-01-26",
                    "end": "2024-02-09"
                },
                {
                    "id": "Task 5",
                    "taskname": "Micro trenching 30 inchs (762mm) depth, Supply and Install 110mm PEC with 4x38mm (Blu, Blo, Gre & White) subducts builtin with filling of concrete, with std warning tape, 2 layers of 6mil poly sheet, Green color paint on top of duct bank",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8598",
                        "8372",
                        "8646",
                        "8663",
                        "7762",
                        "7416",
                        "8524"
                    ],
                    "employees_name": [
                        "MUHAMMAD ZUBAIR AKBAR",
                        "RIZWAN NAZIR",
                        "BERNOLLEI CATIPAY RICABORDA",
                        "MUJEEB UR REHMAN",
                        "IFTIKHAR KHAN",
                        "RAJA SOBAN TAMEER",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "going on leave",
                        "working",
                        "working",
                        "going on leave",
                        "going on leave",
                        "going on leave"
                    ],
                    "start": "2024-02-12",
                    "end": "2024-04-16"
                },
                {
                    "id": "Task 6",
                    "taskname": "Supply and Install Concrete Ductbank inclusive of (2x110PVC with 1x4 38mm (Blu, Blo, Gre & White) dia subducts with 6.3mm Nylon Rope) and std warning tape, 2 layers of 6mil poly sheet, Green color paint on top of duct bank",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8598",
                        "8663",
                        "7762",
                        "7416",
                        "8524"
                    ],
                    "employees_name": [
                        "MUHAMMAD ZUBAIR AKBAR",
                        "MUJEEB UR REHMAN",
                        "IFTIKHAR KHAN",
                        "RAJA SOBAN TAMEER",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "working",
                        "going on leave",
                        "going on leave",
                        "going on leave"
                    ],
                    "start": "2024-02-15",
                    "end": "2024-03-19"
                },
                {
                    "id": "Task 7",
                    "taskname": "Supply and Install Commun Service Manhole (Type-1) 1500mmX1200mmX1850mm Inside Dim, HD Cover and Restoration",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8598",
                        "8663",
                        "7762",
                        "7416",
                        "8524"
                    ],
                    "employees_name": [
                        "MUHAMMAD ZUBAIR AKBAR",
                        "MUJEEB UR REHMAN",
                        "IFTIKHAR KHAN",
                        "RAJA SOBAN TAMEER",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "working",
                        "going on leave",
                        "going on leave",
                        "going on leave"
                    ],
                    "start": "2024-02-16",
                    "end": "2024-02-20"
                },
                {
                    "id": "Task 8",
                    "taskname": "Supply and Install Commun Handhole (Traffic Type) 1200mmx1200mmx1200mm, HD Cover and Restoration",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8598",
                        "8663",
                        "7762",
                        "7416",
                        "8524"
                    ],
                    "employees_name": [
                        "MUHAMMAD ZUBAIR AKBAR",
                        "MUJEEB UR REHMAN",
                        "IFTIKHAR KHAN",
                        "RAJA SOBAN TAMEER",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "working",
                        "going on leave",
                        "going on leave",
                        "going on leave"
                    ],
                    "start": "2024-02-16",
                    "end": "2024-03-01"
                },
                {
                    "id": "Task 9",
                    "taskname": "Supply and Install Special Sized CHH with 900mmX900mmX900mm inside dimensions, HD Cover and Restoration",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8598",
                        "8663",
                        "7762",
                        "7416",
                        "8524"
                    ],
                    "employees_name": [
                        "MUHAMMAD ZUBAIR AKBAR",
                        "MUJEEB UR REHMAN",
                        "IFTIKHAR KHAN",
                        "RAJA SOBAN TAMEER",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "working",
                        "going on leave",
                        "going on leave",
                        "going on leave"
                    ],
                    "start": "2024-02-16",
                    "end": "2024-02-16"
                },
                {
                    "id": "Task 10",
                    "taskname": "Cleaning/Rehablitation/Repair of existing trench/duct bank, MH/HH per PTS ",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8598",
                        "8663",
                        "7762",
                        "7416",
                        "8524"
                    ],
                    "employees_name": [
                        "MUHAMMAD ZUBAIR AKBAR",
                        "MUJEEB UR REHMAN",
                        "IFTIKHAR KHAN",
                        "RAJA SOBAN TAMEER",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "working",
                        "going on leave",
                        "going on leave",
                        "going on leave"
                    ],
                    "start": "2024-02-10",
                    "end": "2024-02-24"
                },
                {
                    "id": "Task 11",
                    "taskname": "Milling and re-asphalting Inclusive of normal and advanced street, width as per As per Amanah STDs",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "7762",
                        "7416",
                        "8598",
                        "8372",
                        "8646",
                        "8663"
                    ],
                    "employees_name": [
                        "IFTIKHAR KHAN",
                        "RAJA SOBAN TAMEER",
                        "MUHAMMAD ZUBAIR AKBAR",
                        "RIZWAN NAZIR",
                        "BERNOLLEI CATIPAY RICABORDA",
                        "MUJEEB UR REHMAN"
                    ],
                    "work_status": [
                        "going on leave",
                        "going on leave",
                        "working",
                        "going on leave",
                        "working",
                        "working"
                    ],
                    "start": "2024-03-04",
                    "end": "2024-04-21"
                },
                {
                    "id": "Task 12",
                    "taskname": "Civil Inspection",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "7416"
                    ],
                    "employees_name": [
                        "RAJA SOBAN TAMEER"
                    ],
                    "work_status": [
                        "going on leave"
                    ],
                    "start": "2024-04-24",
                    "end": "2024-04-26"
                },
                {
                    "id": "Task 13",
                    "taskname": "Supply and Install 96-core (ITU-T-G.652d) UGNMFOC",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8598",
                        "7239",
                        "8524"
                    ],
                    "employees_name": [
                        "MUHAMMAD ZUBAIR AKBAR",
                        "JACKIE CRISTOBAL CONCEPCION",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "going on leave",
                        "going on leave"
                    ],
                    "start": "2024-04-17",
                    "end": "2024-04-27"
                },
                {
                    "id": "Task 14",
                    "taskname": "Supply and Install UGNMFOC Type Optical Fiber Joint Box (Non-Metallic Type)",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8647",
                        "8513",
                        "8619",
                        "8524"
                    ],
                    "employees_name": [
                        "ARIEL JACA ALAGENIO",
                        "SHEHRYAR SHABBIR",
                        "FOYSAL MAHMOUD",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "working",
                        "working",
                        "going on leave"
                    ],
                    "start": "2024-04-28",
                    "end": "2024-04-30"
                },
                {
                    "id": "Task 15",
                    "taskname": "Supply and Install Fiber Optic Cable Management Rack (FOMR)",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8647",
                        "8513",
                        "8619",
                        "8595",
                        "8645",
                        "7239",
                        "8524"
                    ],
                    "employees_name": [
                        "ARIEL JACA ALAGENIO",
                        "SHEHRYAR SHABBIR",
                        "FOYSAL MAHMOUD",
                        "MD ABDUL KHALEK",
                        "ABDULHAKIM ABU RADHI",
                        "JACKIE CRISTOBAL CONCEPCION",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "working",
                        "working",
                        "working",
                        "working",
                        "going on leave",
                        "going on leave"
                    ],
                    "start": "2024-05-01",
                    "end": "2024-05-04"
                },
                {
                    "id": "Task 16",
                    "taskname": "Supply and Install Fiber Splicing/Termination Panel (FSTP-RM) Rack Mounted Type",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8647",
                        "8513",
                        "8619",
                        "8595",
                        "8645",
                        "7239",
                        "8524"
                    ],
                    "employees_name": [
                        "ARIEL JACA ALAGENIO",
                        "SHEHRYAR SHABBIR",
                        "FOYSAL MAHMOUD",
                        "MD ABDUL KHALEK",
                        "ABDULHAKIM ABU RADHI",
                        "JACKIE CRISTOBAL CONCEPCION",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "working",
                        "working",
                        "working",
                        "working",
                        "going on leave",
                        "going on leave"
                    ],
                    "start": "2024-05-05",
                    "end": "2024-05-10"
                },
                {
                    "id": "Task 17",
                    "taskname": "Supply Fiber Optic Pigtail One end: (LC-APC Type) ITU-T-G.652D",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8560",
                        "8590"
                    ],
                    "employees_name": [
                        "REHAN RAIS IDRISI",
                        "MD SULMAN HOSSAIN"
                    ],
                    "work_status": [
                        "working",
                        "working"
                    ],
                    "start": "2024-05-11",
                    "end": "2024-05-14"
                },
                {
                    "id": "Task 18",
                    "taskname": "Supply and Install Communications Cable Ladder/Tray (12\" wide)",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8645",
                        "8560",
                        "8590",
                        "8645",
                        "8560",
                        "8590",
                        "8524"
                    ],
                    "employees_name": [
                        "ABDULHAKIM ABU RADHI",
                        "REHAN RAIS IDRISI",
                        "MD SULMAN HOSSAIN",
                        "ABDULHAKIM ABU RADHI",
                        "REHAN RAIS IDRISI",
                        "MD SULMAN HOSSAIN",
                        "MOHAMMED NASLAH"
                    ],
                    "work_status": [
                        "working",
                        "working",
                        "working",
                        "working",
                        "working",
                        "working",
                        "going on leave"
                    ],
                    "start": "2024-05-15",
                    "end": "2024-05-23"
                },
                {
                    "id": "Task 19",
                    "taskname": "Complete Splicing, Testing & Commissioning of each link",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "8560",
                        "8590",
                        "8595",
                        "7762"
                    ],
                    "employees_name": [
                        "REHAN RAIS IDRISI",
                        "MD SULMAN HOSSAIN",
                        "MD ABDUL KHALEK",
                        "IFTIKHAR KHAN"
                    ],
                    "work_status": [
                        "working",
                        "working",
                        "working",
                        "going on leave"
                    ],
                    "start": "2024-05-24",
                    "end": "2024-05-29"
                },
                {
                    "id": "Task 20",
                    "taskname": "Fiber Inspection",
                    "name": "Activity / Task ",
                    "employees_id": [
                        "7877"
                    ],
                    "employees_name": [
                        "Unknown"
                    ],
                    "work_status": [
                        "working"
                    ],
                    "start": "2024-06-14",
                    "end": "2024-06-29"
                }
            ]

            // const daysCount = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]
            // selecting DOM elements
            const gantt = document.querySelector('.gantt');
            let button = document.createElement('button')
            const dateMonth = document.querySelectorAll('.months')
            const AITextBox = document.querySelector('.aitextbox')
            const wrapper = document.querySelector('#ganttChart')
            const body = document.body;
            // const textPara = document.querySelector('.type-auto')

            // const barRow = document.querySelectorAll('.gantt__row-bars')

            button.className = 'button';


            const typedHeading = new Typed('.heading', {
                strings: ['AI Intelligence is Activated'],
                typeSpeed: 150,
                backSpeed: 150,
                loop: true
            })

            let typed = new Typed('.type-auto', {
                strings: ['The Semrush AI Text Generator, also known as an AI typer, is a tool powered by artificial intelligence. It uses data and language patterns to generate text from the input it gets. Think of it as a digital writer who understands your needs and can create content that resonates with your audience.'],
                typeSpeed: 150,
                backSpeed: 150,
                loop: true
            })

            //Creating Parent Wrapper box dynamically
            for (let i = 0; i < ganttData.length; i++) {
                const loopData = ganttData[i]
                const newBox = document.createElement('div')
                const newBoxRow = document.createElement('div')
                const ul = document.createElement('ul')
                ul.style.display = 'flex'

                newBox.className = 'gantt__row';
                newBoxRow.className = 'gantt__row-first';

                ul.className = 'gantt__row-bars'

                //creating the taskBars dynamically

                const startDate = ganttData[i].start;
                const endDate = ganttData[i].end;

                const convert = new Date(startDate)
                const convert2 = new Date(endDate)

                const startMonth = convert.getMonth() + 1;
                const endMonth = convert2.getMonth() + 1;

                const li = document.createElement('li')
                newBoxRow.style.position = 'relative';


                const name = ganttData[i].name;
                const milestone = 'Milstone'

                if (name === milestone) {
                    li.style.backgroundColor = '#8ecae6';
                } else {
                    li.style.backgroundColor = 'red'
                }
                li.innerHTML = `${ganttData[i].name}`;
                li.addEventListener('mouseover', function () {
                    const divForDate = document.createElement('div')
                    // divForDate.className = 'sedate'
                    const span = document.createElement('span')
                    const item1 = document.createElement('li')
                    const item2 = document.createElement('li')

                    span.className = 'sedate'
                    item1.innerHTML = `start date: ${startDate}`
                    item2.innerHTML = `end date: ${endDate}`
                    span.append(item1, item2)
                    divForDate.appendChild(span)
                    newBoxRow.appendChild(divForDate)

                })
                li.addEventListener('mouseout', function () {
                    li.innerHTML = `${ganttData[i].name}`
                    newBoxRow.lastChild.remove()

                })
                li.addEventListener('click', function (e) {
                    const table = document.getElementById('taskDetailsTable')
                    const tbody = table.getElementsByTagName('tbody')[0]
                    const newRow = tbody.insertRow()
                    const cell1 = newRow.insertCell(0)
                    cell1.innerHTML = ganttData[i].taskname;
                    const cell2 = newRow.insertCell(1)
                    cell2.innerHTML = ganttData[i].name;
                    const cell3 = newRow.insertCell(2)
                    cell3.innerHTML = ganttData[i].employees_name;
                    const cell4 = newRow.insertCell(3)
                    cell4.innerHTML = ganttData[i].work_status;
                    let cell5 = newRow.insertCell(4)
                    cell5.innerHTML = ganttData[i].taskname


                    let workStatus = loopData.work_status;
                    for (let j = 0; j < workStatus.length; j++) {
                        if (workStatus[j] == "going on leave" || workStatus == "leave") {

                            button.innerHTML = 'Suggetion'
                            cell5.innerText = ''
                            cell5.appendChild(button)
                        }
                    }
                })

                li.style.gridColumn = `${startMonth}/11`;
                ul.appendChild(li)
                newBoxRow.innerHTML = ganttData[i].taskname;
                newBox.appendChild(newBoxRow)
                newBox.appendChild(ul)
                gantt.appendChild(newBox)
            }

            button.addEventListener('click', function () {
                AITextBox.style.display = 'block';
                wrapper.style.opacity = 0.2
            })
            






        </script>





</body>

</html>